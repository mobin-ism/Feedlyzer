import { Body, Controller, HttpStatus, Post } from '@nestjs/common'
import { ApiOperation, ApiResponse, ApiTags } from '@nestjs/swagger'
import { TopicExtractionService } from './topic-extraction.service'

@ApiTags('Topic Extraction')
@Controller('topic-extraction')
export class TopicExtractionController {
    constructor(
        private readonly topicExtractionService: TopicExtractionService
    ) {}

    @Post()
    @ApiOperation({
        summary: 'Extract topics from a given text'
    })
    @ApiResponse({ description: 'Bad Request', status: HttpStatus.BAD_REQUEST })
    @ApiResponse({
        description: 'Something went wrong',
        status: HttpStatus.INTERNAL_SERVER_ERROR
    })
    @ApiResponse({
        description: 'Data found successfully',
        status: HttpStatus.OK
    })
    async findAll(@Body('text') text: string) {
        text = "The Legacy of the 2022 FIFA World Cup in Qatar The 2022 FIFA World Cup in Qatar will be remembered as one of the most unique and transformative tournaments in football history. Not only did it mark the first time the tournament was held in the Middle East, but it also pushed the boundaries of how global sporting events are staged. From technological innovations to environmental considerations and cultural significance, the 2022 World Cup has left a lasting legacy.  A Tournament of Firsts The Qatar World Cup was the first-ever winter edition, held from November 20 to December 18, 2022, due to the extreme summer temperatures in the region. This shift in schedule disrupted the traditional football calendar, but it also opened the door for other regions with challenging climates to host future global sporting events.  Qatar also made history as the smallest country by area to host the World Cup. Its compact size allowed for easy travel between venues, giving fans the opportunity to attend multiple matches on the same day. This proximity of stadiums and facilities created a more connected experience for players, fans, and officials alike, fostering a greater sense of unity.  Stadiums and Infrastructure Qatar’s ambitious infrastructure projects were at the heart of its World Cup success. The country built eight state-of-the-art stadiums, each designed with sustainability in mind. Some of these venues, such as the modular Stadium 974, were made using shipping containers and are set to be dismantled and repurposed after the tournament.  The cooling technologies used in the stadiums were another notable innovation. Designed to combat the desert heat, these systems ensured optimal playing conditions for athletes and a comfortable viewing experience for fans. These technologies could have a lasting impact, potentially being used in other parts of the world with harsh climates.  Beyond the stadiums, Qatar’s investments in transportation and infrastructure—such as the expansion of Hamad International Airport and the construction of a new metro system—were significant. These developments are expected to contribute to the country’s long-term goal of becoming a major global hub for sports, tourism, and business.  Social and Cultural Impact The 2022 World Cup was not without its controversies, particularly surrounding labor rights and human rights issues. The treatment of migrant workers involved in building the tournament’s infrastructure sparked global outcry. In response, Qatar made labor reforms, introducing measures like the minimum wage and improvements to working conditions. While these reforms were a step in the right direction, critics argue that more is needed to ensure lasting change for workers.  On the cultural front, the tournament presented an opportunity for Qatar and the wider Middle East to showcase their rich heritage. The blend of modernity and tradition was evident in everything from the stadium designs to the fan experiences. For many, it was their first exposure to Arab culture on a global stage, and Qatar used the platform to promote cultural exchange and understanding.  Memorable Moments on the Field The 2022 World Cup will also be remembered for its incredible moments of football brilliance. Argentina’s victory, led by Lionel Messi, finally secured the legendary player's first World Cup title and cemented his status as one of the greatest of all time. France’s Kylian Mbappé lit up the tournament with his electrifying pace and goal-scoring prowess, including a hat-trick in the final—one of the most thrilling in World Cup history.  Underdog stories, like Morocco’s remarkable run to the semifinals, captivated the world. The team became the first African and Arab nation to reach that stage of the tournament, inspiring millions across the region. Their success highlighted the growing strength and competitiveness of football outside traditional powerhouses.  The Environmental Challenge One of the most significant criticisms of the Qatar World Cup was its environmental impact. Despite efforts to brand the tournament as "carbon-neutral," many environmentalists remained skeptical. The vast amount of construction, combined with the large influx of international travelers, raised concerns about the event's carbon footprint.  However, Qatar made strides to mitigate environmental damage, incorporating renewable energy sources, energy-efficient stadium designs, and green building materials. The tournament highlighted the need for future mega-events to be even more mindful of sustainability and environmental responsibility.  The Road Ahead As the dust settles from the 2022 World Cup, its legacy continues to unfold. Qatar aims to build on the momentum, using the infrastructure and international recognition it gained to foster a thriving sports industry. The stadiums and facilities will be repurposed for future events, while some will be downsized or donated to developing countries in need of sports infrastructure.  For football, the tournament opened doors for future hosts from non-traditional regions. It demonstrated that the World Cup could thrive outside of its traditional summer slot and in regions previously considered unsuitable. With the 2026 edition set to be held across the USA, Canada, and Mexico, Qatar's World Cup has set a precedent for innovation and inclusion in the world of sports.  Conclusion The 2022 FIFA World Cup in Qatar was a tournament like no other, with a mix of groundbreaking infrastructure, cultural significance, and sporting drama. While it faced its share of challenges and controversies, its impact on the football world and beyond will be felt for years to come. Whether through its technological advancements, sustainability efforts, or the unforgettable moments on the pitch, the legacy of Qatar 2022 is one of transformation and progress.  This article highlights the broader impact of the 2022 FIFA World Cup, both on and off the pitch. If you want a more specific focus, let me know!"
        return await this.topicExtractionService.extractTopics(text)
    }
}
